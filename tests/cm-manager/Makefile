include $(TLR_BASE)/build/rds00008.mk

CMAPI_INCDIR=$(TLR_BASE)/cm-api
CMMANAGER_INCDIR=$(CMAPI_INCDIR)

CMMANAGER_LIBDIR=$(TLR_BASE)/cm-manager

INCLUDE=-I$(CMMANAGER_INCDIR)

ifeq ($(DEBUG),true)
CFLAGS += -g -DCM_DEBUG
endif

.PHONY: all clean

CM_MANAGER_TESTBIN=cm_manager
CM_MANAGER_ASYNC_TESTBIN=cm_manager_async

all: $(CM_MANAGER_TESTBIN) $(CM_MANAGER_ASYNC_TESTBIN) 

$(CM_MANAGER_TESTBIN):
	$(CC) $(CM_MANAGER_TESTBIN).c -o $@ $(CFLAGS) $(INCLUDE) -L $(CMMANAGER_LIBDIR) -lcm-manager -Wl,-rpath,$(CMMANAGER_LIBDIR)

$(CM_MANAGER_ASYNC_TESTBIN):
	$(CC) $(CM_MANAGER_ASYNC_TESTBIN).c -o $@ $(CFLAGS) $(INCLUDE) -L $(CMMANAGER_LIBDIR) -lcm-manager -Wl,-rpath,$(CMMANAGER_LIBDIR) 


clean:
	rm -f $(CM_MANAGER_TESTBIN) $(CM_MANAGER_ASYNC_TESTBIN) ./*.d
